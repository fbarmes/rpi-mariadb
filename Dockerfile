#===============================================================================
# rpi-mariadb image
#===============================================================================
FROM fbarmes/rpi-alpine:latest


#-------------------------------------------------------------------------------
# setup system
#-------------------------------------------------------------------------------
RUN \
  # update system
  apk update && apk upgrade

#-------------------------------------------------------------------------------
# install mariadb
#-------------------------------------------------------------------------------
RUN \
  apk add mariadb mariadb-client

#-------------------------------------------------------------------------------
# setup mariadb
#-------------------------------------------------------------------------------
ENV MARIADB_ROOT_PASSWORD ""
ENV MARIADB_DB_NAME ""
ENV MARIADB_DB_USER ""
ENV MARIADB_DB_PASSWORD ""

#-------------------------------------------------------------------------------
# wrap up
#-------------------------------------------------------------------------------
EXPOSE 3306
VOLUME /data/mysql
COPY docker-entrypoint.sh /usr/local/bin/
RUN chmod 755 /usr/local/bin/docker-entrypoint.sh

#-- install entrypoint
ENTRYPOINT ["/usr/local/bin/docker-entrypoint.sh"]
